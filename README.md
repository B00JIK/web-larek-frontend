# Проектная работа "Веб-ларек"

Архитектура проекта разрабатывается с использованием паттерна MVP(Model-View-Presenter), в котором основными слоями являются M(Model) - это модели данных, V(View) - компоненты представления, отвечающие за отображение данных на экране и P(Presenter) - код презентера не будет выделен в отдельный класс, а будет содержаться в оснвном скрипте index.ts.

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

# Описание базовых классов

## Класс Api
Методы: 

- handleResponse(response: Response): Promise<object> - обработчик ответа сервера.
- get(uri: string) - принимает изменяющеюся часть url-адреса, возвращает ответ от сервера.
- post(uri: string, data: object, method: ApiPostMethods = 'POST') - принимает изменяющеюся часть url-адреса, принимает данные в виде объекта для отправки на сервер, type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'.

## Класс EventEmitter - брокер событий.

Класс EventEmitter реализует паттерн «Observer/Наблюдатель» и обеспечивает работу событий, его методы позволяют устанавливать и снимать слушатели событий.

Методы:

- on - Установить обработчик на событие.
- off - Снять обработчик с события.
- emit - Инициировать событие с данными.
- onAll - Слушать все события.
- offAll - Сбросить все обработчики.
- trigger - Сделать коллбек триггер, генерирующий событие при вызове.

# Описание классов Model, которые позволяют хранить и обрабатывать данные с сервера и от пользователей.

## Класс ApiModel наследуется от класса Api, передаёт и получает данные от сервера.

- getItem - получаем данные товаров с сервера.
- postOrder - отправляем данные о заказе на сервер. 

## Класс BasketModel работает с данными товаров, добавленных в корзину.

- itemsCounter - считаем количество товаров в корзине.
- totalItemsPrice - считаем сумму денег за все товары в корзине.
- addItem - добавляем товары в корзину.
- deleteItem - добавляем товары в корзину.
- clearBasket - удаляем все товары из корзины после оформления заказа.

## Класс DataModel работает с данными, полученными с сервера.

- setItems - создаем массив из данных, полученных с сервера, и отслеживаем изменения в данных.
- getItems - возвращаем массив данных.

## Класс FormModel работает с данными, полученными от пользователя

- setOrderAddress - сохраняем адрес пользователя.
- setOrderContatcs - сохраняем номер телефона и почту пользователя.
- validateAddress - проверяем, введен ли адрес и выбран ли способ оплаты.
- validateContacts - проверяем, введены ли телефон и почта.
- getOrder - возвращаем объект с данными пользователя и данными выбранного товара.

# Классы View позволяют отображать элементы на странице и взаимодействовать с пользователем.

## Класс Basket управляет отображением элементов в корзине.

- totalItems - устанавливаем сумму всех товаров в корзине.

## Класс BasketItem управляет отображением товаров в корзине.

- renderItem - выводим карточку выбронного товара.

## Класс ContactForm управляет отображением формы получения телефона и почты от пользователя.

## Класс Item управляет отображением карточек товаров на странице.

## Класс Modal отвечает за открытие и закрытие модальных окон.

- open - открываем модальное окно.
- close - закрываем модальное окно.
- render - заполняем модальное окно данными.

## Класс Page отвечает за отображение данных на главной странице.

- totalItems - устанавливаем, какое количество товаров находится в корзине.

## Класс PaymentForm управляет отображением формы получения адреса и метода оплаты.

## Класс PopupItem управляет отображением модального окна с подробным описанием товара, позволяет добавить товар в корзину.

## Класс Success управляет отображением модального окна с информацией об удачном завершении покупки.

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
